<!-- Ð•ÑÐ»Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ ÐµÑ‰Ñ‘ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ñ‹, Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¸Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ -->
<ng-container *ngIf="!(books$ | async) as books; else loaded">
  <div class="loading-message">ðŸ”„ Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÐºÐ½Ð¸Ð³...</div>
</ng-container>

<!-- Ð—Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ -->
<ng-template #loaded>
  <ng-container *ngIf="(books$ | async) as books">
    <!-- Ð•ÑÐ»Ð¸ ÐºÐ½Ð¸Ð³ Ð½ÐµÑ‚ -->
    <div *ngIf="books.length === 0" class="empty-message">
      ðŸ“­ ÐŸÐ¾ÐºÐ° Ð½ÐµÑ‚ ÐºÐ½Ð¸Ð³. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÐµÑ€Ð²ÑƒÑŽ!
    </div>

    <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº ÐºÐ½Ð¸Ð³ -->
    <div *ngIf="books.length > 0" class="books-container" fxLayout="row wrap" fxLayoutGap="1rem" fxLayoutAlign="center start">
      <mat-card class="book-card"
                *ngFor="let book of books"
                (click)="goToDetail(book.id)"
                matRipple
                matRippleColor="rgba(0,0,0,0.1)">
        <mat-card-header>
          <div mat-card-avatar class="book-avatar">
            <!-- ÐÐ²Ð°Ñ‚Ð°Ñ€-ÑÐ¼Ð°Ð¹Ð»Ð¸Ðº ÐºÐ½Ð¸Ð³Ð¸ -->
            <span class="book-emoji" aria-hidden="true">ðŸ“š</span>
          </div>
          <mat-card-title class="book-title">{{ book.title }}</mat-card-title>
          <mat-card-subtitle class="book-authors">{{ book.authors }}</mat-card-subtitle>
        </mat-card-header>

        <!-- Ð’Ð¼ÐµÑÑ‚Ð¾ Ð¾Ð±Ð»Ð¾Ð¶ÐºÐ¸ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼ ÑÐ¼Ð°Ð¹Ð»Ð¸Ðº-Ð¾Ð±Ð»Ð¾Ð¶ÐºÑƒ -->
        <div class="book-cover-emoji">
          <span class="cover-emoji" aria-hidden="true">ðŸ“–</span>
        </div>

        <mat-card-content>
          <p class="book-description">
            {{ book.description | slice:0:100 }}<span *ngIf="book.description?.length > 100">...</span>
          </p>
        </mat-card-content>

        <mat-card-actions align="end">
          <button mat-button color="primary" (click)="goToDetail(book.id); $event.stopPropagation()">ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </ng-container>
</ng-template>
